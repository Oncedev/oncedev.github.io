<!DOCTYPE html>
<!--[if IE 8]>			<html class="ie ie8"> <![endif]-->
<!--[if IE 9]>			<html class="ie ie9"> <![endif]-->
<!--[if gt IE 9]><!-->	<html> <!--<![endif]-->
   <head>
      <meta charset="utf-8">
      <title>OnceDev | Criando um mapa da copa do mundo usando o Xamarin.iOS</title>
      <meta name="description" content="A OnceDev foi fundada por profissionais que acreditam que é possível produzir software de maneira profissional, com alta produtividade e sem abrir mão de qualidade.">
      <meta name="author" content="FIFOTHEMES.COM">
      <!-- Mobile Metas -->
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <!-- Google Fonts -->
      <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800' rel='stylesheet' type='text/css'>
      <link href='https://fonts.googleapis.com/css?family=Oswald:400,300,700' rel='stylesheet' type='text/css'>
      <!-- Library CSS -->
      <link rel="stylesheet" href="/content/css/bootstrap.css">
      <link rel="stylesheet" href="/content/css/fonts/font-awesome/css/font-awesome.css">
      <link rel="stylesheet" href="/content/css/animations.css" media="screen">
      <link rel="stylesheet" href="/content/css/superfish.css" media="screen">
      <link rel="stylesheet" href="/content/css/revolution-slider/css/settings.css" media="screen">
      <link rel="stylesheet" href="/content/css/prettyPhoto.css" media="screen">
      <!-- Theme CSS -->
      <link rel="stylesheet" href="/content/css/style.css">
      <!-- Skin -->
      <link rel="stylesheet" href="/content/css/colors/orange.css">
      <!-- Responsive CSS -->
      <link rel="stylesheet" href="/content/css/theme-responsive.css">
      <!-- Syntax CSS -->
      <link rel="stylesheet" href="/content/css/syntax.css">
      <!-- Favicons -->
      <link rel="shortcut icon" href="/content/img/ico/favicon.ico">
      <link rel="apple-touch-icon" href="/content/img/ico/apple-touch-icon.png">
      <link rel="apple-touch-icon" sizes="72x72" href="/content/img/ico/apple-touch-icon-72.png">
      <link rel="apple-touch-icon" sizes="114x114" href="/content/img/ico/apple-touch-icon-114.png">
      <link rel="apple-touch-icon" sizes="144x144" href="/content/img/ico/apple-touch-icon-144.png">
      <!-- The HTML5 shim, for IE6-8 support of HTML5 elements -->
      <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
      <script src="/content/js/respond.min.js"></script>
      <![endif]-->
      <!--[if IE]>
      <link rel="stylesheet" href="/content/css/ie.css">
      <![endif]-->

      
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-52445211-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


  
   </head>
   <body class="home">
      <div class="wrap">
         <!-- Header Start -->
         <header id="header">
            <!-- Header Top Bar Start -->
			<!--
            <div class="top-bar">
               <div class="slidedown collapse">
                  <div class="container">
                     <div class="phone-email pull-left">
                        <a><i class="icon-phone"></i> Ligue : +55 71 9723 9272</a>
                        <a href="mail@example.com"><i class="icon-envelope"></i> Email : contato@oncedev.com</a>
                     </div>
                     <div class="pull-right">
                        <ul class="social pull-left">
                           <li class="facebook"><a href="#"><i class="icon-facebook"></i></a></li>
                           <li class="twitter"><a href="#"><i class="icon-twitter"></i></a></li>
                           <li class="dribbble"><a href="#"><i class="icon-dribbble"></i></a></li>
                           <li class="linkedin"><a href="#"><i class="icon-linkedin"></i></a></li>
                           <li class="rss"><a href="#"><i class="icon-rss"></i></a></li>
                        </ul>
                        <div id="search-form" class="pull-right">
                           <form action="#" method="get">
                              <input type="text" class="search-text-box">
                           </form>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
			-->
            <!-- Header Top Bar End -->
            <!-- Main Header Start -->
            <div class="main-header">
               <div class="container">
                  <!-- Logo Start -->
                  <div class="logo pull-left">
                     <h1>
			<a href="http://www.oncedev.com/">
                        <img src="/content/img/logo.png" alt="oncedev">
                        </a>
                     </h1>
                  </div>
                  <!-- Logo End -->
                  <!-- Mobile Menu Start -->
                  <div class="mobile navbar-header">
                     <a class="navbar-toggle" data-toggle="collapse" href=".navbar-collapse">
                     <i class="icon-reorder icon-2x"></i>
                     </a> 
                  </div>
                  <!-- Mobile Menu End -->
                  <!-- Menu Start -->
                  <nav class="collapse navbar-collapse menu">
                     <ul class="nav navbar-nav sf-menu">
			     <li><a href="http://www.oncedev.com/">Início</a></li>
			     <li><a href="http://www.oncedev.com/missao">Missão</a></li>
			     <li><a href="http://www.oncedev.com/clientes">Clientes</a></li>
			     <li><a href="http://www.oncedev.com/servicos">Serviços</a></li>
			     <li><a href="http://www.oncedev.com/contato">Contato</a></li>
						<li><a href="/">Blog</a></li>
                     </ul>
                  </nav>
                  <!-- Menu End --> 
               </div>
            </div>
            <!-- Main Header End -->
         </header>
         <!-- Header End --> 
		 
		<!-- Content Start -->
		<div id="main">
                <div class="breadcrumb-wrapper">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 col-md-6 col-xs-12 col-sm-6">
                <h2 class="title">Post</h2>
                
            </div>
            <div class="col-lg-6 col-md-6 col-xs-12 col-sm-6">
                <div class="breadcrumbs pull-right">
                    <ul>
                        <li>Você está aqui:</li>
                        <li><a href="http://www.oncedev.com/">Início</a></li>
                        <li><a href="/">Blog</a></li>
                        
                        <li>Criando um mapa da copa do mundo usando o Xamarin.iOS</li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
                <!-- Main Content start-->
                <div class="content">
                <div class="container">
                        <div class="row">
                        <div class="posts-block col-lg-9 col-md-9 col-sm-8 col-xs-12 bottom-pad">
    <article class="post hentry">
        




<header class="post-header">
	<h3 class="content-title">
		<a class="titulo-post" href="">Criando um mapa da copa do mundo usando o Xamarin.iOS</a>
	</h3>
	<div class="blog-entry-meta">
		<div class="blog-entry-meta-date">
			<i class="icon-time"></i>
			13/07/2014
		</div>
		<div class="blog-entry-meta-author">
			<i class="icon-user"></i>
                        <a href="mailto:pauloortins@oncedev.com" class="blog-entry-meta-author">Paulo Ortins</a>
		</div>
		<div class="blog-entry-meta-tags">
			<i class="icon-circle"></i>
			
			<a href="/mobile">mobile</a>
			
	    	</div>
		<div class="blog-entry-meta-tags">
			<i class="icon-tags"></i>
			Xamarin, Mobile
		</div>
		
	</div>
</header>


        <div class="post-content">					  
        <p>Em tempo de copa no Brasil é impossível programar sem ao menos dividir a atenção entre o monitor do computador e a peleja rolando na TV. Mas não são só os jogos da copa que tem me empolgado nessas semanas, a capacidade de usar uma única linguagem para programar o servidor e aplicações mobile NATIVAS tem me empolgado bastante e a experiência tem sido bastante interessante. Mas por que não juntar as duas paixões e fazer um post demonstrando um dos recursos do Xamarin para visualizar informações sobre a copa do mundo?</p>

<p>Nesse post pretendo mostrar um passo a passo em como podemos utilizar mapas no Xamarin.iOS e usa-lo para plotar informações sobre as seleções e os estádios da copa do mundo. Iremos seguir usando baby steps na seguinte sequência:</p>

<ol>
  <li>Criação de uma aplicação no Xamarin</li>
  <li>Criação do mapa</li>
  <li>Plotando pontos no mapa</li>
  <li>Customizando a aparência dos pontos no mapa</li>
</ol>

<p><br /></p>

<h2 id="criao-de-uma-aplicao-no-xamarin">Criação de uma aplicação no Xamarin</h2>

<p>O primeiro passo que iremos dar é criar uma aplicação no Xamarin chamada WorldCupMap. Para isso acesse File &gt; New &gt; Solution e crie um novo projeto conforme as configurações da imagem abaixo.</p>

<p><img src="/content/img/blog/posts/2014-07-05/criando-aplicacao.png" alt="Criando aplicacao" /></p>

<h3 id="analisando-a-estrutura-do-projeto">Analisando a estrutura do projeto</h3>

<p>Após a criação do projeto, o Xamarin automaticamente cria uma estrutura com alguns arquivos. Vamos falar sobre a importância de alguns deles.</p>

<p><img src="/content/img/blog/posts/2014-07-05/estrutura-projeto.png" alt="Estrutura do Projeto" /></p>

<p>O <code>AppDelegate.cs</code> tem uma função similar ao global.asax que utilizamos nas aplicações ASP.NET, ele é o responsável por escutar e responder aos eventos da aplicação. Exemplo de eventos que podem ser escutados são DidEnterBackground(disparado quando a aplicação passar a rodar no background) e WillEnterForeground(disparado quando a aplicação está próxima de ficar ativa).</p>

<p>O <code>Entitlements.plist</code> guarda informações sobre o uso de alguns serviços da apple, como o iCloud e o PassBook.</p>

<p>O <code>info.plist</code> é o principal arquivo de configuração de uma aplicação iOS é nele que configuramos o nome e o identificador da aplicação, os devices que a aplicação suportará (iphone/ipod/ipad/universal), as orientações, íconização e serviços que a aplicação poderá rodar em background como o Maps e Audio.</p>

<p>O <code>MainStoryboard.storyboard</code> é a representação visual das telas e do fluxo da nossa aplicação, a manipulação desses arquivos lembra muito o tradicional drag and drop utilizando no WindowsForms/WebForms. Nesses arquivos podemos montar as telas da aplicação iOS fazendo o uso de controles como por exemplo labels, textfields, tables e etc.</p>

<p>O <code>WorldCupMapViewController.cs</code> é o arquivo que controla as interações dos controles da view com o modelo da nossa aplicação. É nesse arquivo que vão estar os eventos de clicks, initialização e encerramento.</p>

<h4 id="se-tudo-estiver-certo">Se tudo estiver certo…</h4>

<p>Se tudo estiver certo, ao rodar a aplicação iremos ver uma “bela” tela em branco.</p>

<h2 id="criando-o-mapa">Criando o mapa</h2>

<p>O uso de mapas, hoje em dia, é uma feature comum nas aplicações encontradas na AppleStore e isso não é a toa, o MapKit (framework responsável pelo uso de mapas) possibilita que mapas sejam facilmente adicionados. Para adicionar o mapa em nossa aplicação usaremos poucas linhas.</p>

<p>Vamos abrir a classe <code>WorldCupMapViewController.cs</code>, remover todo o seu contéudo e adicionar o código abaixo.</p>

<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">WorldCupMapViewController</span> <span class="p">:</span> <span class="n">UIViewController</span>
<span class="p">{</span>
	<span class="k">protected</span> <span class="n">MKMapView</span> <span class="n">map</span><span class="p">;</span>
	<span class="k">public</span> <span class="nf">WorldCupMapViewController</span> <span class="p">(</span><span class="n">IntPtr</span> <span class="n">handle</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span> <span class="p">(</span><span class="n">handle</span><span class="p">)</span>
	<span class="p">{</span>
	<span class="p">}</span>

	<span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">LoadView</span> <span class="p">()</span>
	<span class="p">{</span>
		<span class="n">map</span> <span class="p">=</span> <span class="k">new</span> <span class="n">MKMapView</span> <span class="p">(</span><span class="n">UIScreen</span><span class="p">.</span><span class="n">MainScreen</span><span class="p">.</span><span class="n">Bounds</span><span class="p">);</span>
		<span class="n">View</span> <span class="p">=</span> <span class="n">map</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></div>

<h3 id="executando-o-projeto">Executando o projeto</h3>

<p>Ao executar o projeto já teremos disponível um mapa com suporte a todos os eventos como o panning e o zooming.</p>

<p><img src="/content/img/blog/posts/2014-07-05/mapa.png" alt="Mapa" /></p>

<h2 id="plotando-os-marcadores">Plotando os marcadores</h2>

<p>O próximo passo é plotar os marcadores no mapa, o MapKit oferece suporte para adição de imagens nos mapas através de annotations. Para criarmos um annotation devemos informar o seu título e as suas coordenadas. Após sua criação, será exibido um pin vermelho, no entanto, também é possível a customização do annotation para a exibição de outras imagens.</p>

<h3 id="criando-a-classe-que-representar-as-informaes">Criando a classe que representará as informações</h3>

<p>Para a representação das informações criaremos uma classe de nome <code>WorldCupInfo</code> que irá armazenar o título (nome do país ou do estádio) e suas coordenadas geográficas (latitude e longitude).</p>

<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">class</span> <span class="nc">WorldCupInfo</span>
<span class="p">{</span>
	<span class="k">public</span> <span class="nf">WorldCupInfo</span> <span class="p">()</span>
	<span class="p">{</span>
	<span class="p">}</span>

	<span class="k">public</span> <span class="kt">string</span> <span class="n">Title</span> <span class="p">{</span>
		<span class="k">get</span><span class="p">;</span>
		<span class="k">set</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">public</span> <span class="kt">double</span> <span class="n">Latitude</span> <span class="p">{</span>
		<span class="k">get</span><span class="p">;</span>
		<span class="k">set</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">public</span> <span class="kt">double</span> <span class="n">Longitude</span> <span class="p">{</span>
		<span class="k">get</span><span class="p">;</span>
		<span class="k">set</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></div>

<h3 id="inicializando-a-lista-de-pases-e-estdios">Inicializando a lista de países e estádios</h3>

<p>Após a criação da classe é necessário a criação da lista de estádios e seleções que estão fazendo parte da copa do mundo. Para isso criaremos um atributo para representar a lista no controller assim como um método que irá ser o responsável pela inicialização da lista.</p>

<p>No método GetInfoList eu utilizei a matrix para economizar espaço ao exibir o post.</p>

<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">protected</span> <span class="n">MKMapView</span> <span class="n">map</span><span class="p">;</span>
<span class="k">private</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">WorldCupInfo</span><span class="p">&gt;</span> <span class="n">_infoList</span><span class="p">;</span>

<span class="k">public</span> <span class="nf">WorldCupMapViewController</span> <span class="p">(</span><span class="n">IntPtr</span> <span class="n">handle</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span> <span class="p">(</span><span class="n">handle</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">_infoList</span> <span class="p">=</span> <span class="n">GetInfoList</span> <span class="p">();</span>
<span class="p">}</span>

<span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">WorldCupInfo</span><span class="p">&gt;</span> <span class="n">GetInfoList</span> <span class="p">()</span>
<span class="p">{</span>
	<span class="kt">var</span> <span class="n">infoMatrix</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">object</span><span class="p">[][]</span> <span class="p">{</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Algeria&quot;</span><span class="p">,</span> <span class="m">28.667122</span><span class="p">,</span><span class="m">2.677408</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Argentina&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">35.003106</span><span class="p">,-</span><span class="m">64.741499</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Australia&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">24.734834</span><span class="p">,</span><span class="m">134.248120</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Belgium&quot;</span><span class="p">,</span> <span class="m">50.503887</span><span class="p">,</span><span class="m">4.469936</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Bosnia and Herzegovina&quot;</span><span class="p">,</span> <span class="m">42.5564516</span><span class="p">,</span><span class="m">15.7223665</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Brazil&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">14.235004</span><span class="p">,-</span><span class="m">51.92528</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Cameroon&quot;</span><span class="p">,</span> <span class="m">7.369721999999999</span><span class="p">,</span><span class="m">12.354722</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Chile&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">35.675147</span><span class="p">,-</span><span class="m">71.542969</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Colombia&quot;</span><span class="p">,</span> <span class="m">4.570868</span><span class="p">,-</span><span class="m">74.29733299999999</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Costa Rica&quot;</span><span class="p">,</span> <span class="m">9.748916999999999</span><span class="p">,-</span><span class="m">83.753428</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Côte d&#39;Ivoire&quot;</span><span class="p">,</span> <span class="m">7.539988999999999</span><span class="p">,-</span><span class="m">5.547079999999999</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Croatia&quot;</span><span class="p">,</span> <span class="m">45.1</span><span class="p">,</span><span class="m">15.2</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Ecuador&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">1.831239</span><span class="p">,-</span><span class="m">78.18340599999999</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;England&quot;</span><span class="p">,</span> <span class="m">52.3555177</span><span class="p">,-</span><span class="m">1.1743197</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;France&quot;</span><span class="p">,</span> <span class="m">46.227638</span><span class="p">,</span><span class="m">2.213749</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Germany&quot;</span><span class="p">,</span> <span class="m">51.165691</span><span class="p">,</span><span class="m">10.451526</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Ghana&quot;</span><span class="p">,</span> <span class="m">7.946527</span><span class="p">,-</span><span class="m">1.023194</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Greece&quot;</span><span class="p">,</span> <span class="m">39.074208</span><span class="p">,</span><span class="m">21.824312</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Honduras&quot;</span><span class="p">,</span> <span class="m">15.199999</span><span class="p">,-</span><span class="m">86.241905</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Iran&quot;</span><span class="p">,</span> <span class="m">32.427908</span><span class="p">,</span><span class="m">53.688046</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Italy&quot;</span><span class="p">,</span> <span class="m">41.87194</span><span class="p">,</span><span class="m">12.56738</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Japan&quot;</span><span class="p">,</span> <span class="m">36.204824</span><span class="p">,</span><span class="m">138.252924</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Korea Republic&quot;</span><span class="p">,</span> <span class="m">35.907757</span><span class="p">,</span><span class="m">127.766922</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Mexico&quot;</span><span class="p">,</span> <span class="m">23.634501</span><span class="p">,-</span><span class="m">102.552784</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Netherlands&quot;</span><span class="p">,</span> <span class="m">52.132633</span><span class="p">,</span><span class="m">5.291265999999999</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Nigeria&quot;</span><span class="p">,</span> <span class="m">9.081999</span><span class="p">,</span><span class="m">8.675276999999999</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Portugal&quot;</span><span class="p">,</span> <span class="m">39.39987199999999</span><span class="p">,-</span><span class="m">8.224454</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Russia&quot;</span><span class="p">,</span> <span class="m">61.52401</span><span class="p">,</span><span class="m">105.318756</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Spain&quot;</span><span class="p">,</span> <span class="m">40.46366700000001</span><span class="p">,-</span><span class="m">3.74922</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Switzerland&quot;</span><span class="p">,</span> <span class="m">46.818188</span><span class="p">,</span><span class="m">8.227511999999999</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Uruguay&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">32.522779</span><span class="p">,-</span><span class="m">55.765835</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;USA&quot;</span><span class="p">,</span> <span class="m">37.09024</span><span class="p">,-</span><span class="m">95.712891</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Arena Fonte Nova&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">12.97883</span><span class="p">,-</span><span class="m">38.5043711</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Estádio das Dunas&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">5.8268266</span><span class="p">,-</span><span class="m">35.2124299</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Estádio Castelão&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">3.8072311</span><span class="p">,-</span><span class="m">38.5224338</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Arena Pernambuco&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">8.0406496</span><span class="p">,-</span><span class="m">35.0082049</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Arena Amazônia&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">3.083142</span><span class="p">,-</span><span class="m">60.02810849999999</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Estádio Nacional (Mané Garrincha)&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">15.7835191</span><span class="p">,-</span><span class="m">47.899211</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Arena Pantanal&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">15.604017</span><span class="p">,-</span><span class="m">56.1216325</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Arena Corinthians&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">23.5453331</span><span class="p">,-</span><span class="m">46.4737017</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Estádio do Maracanã&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">22.9121089</span><span class="p">,-</span><span class="m">43.2301558</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Estádio Mineirão&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">19.865867</span><span class="p">,-</span><span class="m">43.97113150000001</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Arena da Baixada&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">25.4482116</span><span class="p">,-</span><span class="m">49.2769866</span><span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Estádio Beira-Rio&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">30.065066</span><span class="p">,-</span><span class="m">51.2365144</span><span class="p">}</span>
	<span class="p">};</span>

	<span class="kt">var</span> <span class="n">infoList</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">WorldCupInfo</span><span class="p">&gt;</span> <span class="p">();</span>
	<span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">info</span> <span class="k">in</span> <span class="n">infoMatrix</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">infoList</span><span class="p">.</span><span class="n">Add</span> <span class="p">(</span><span class="k">new</span> <span class="n">WorldCupInfo</span> <span class="p">()</span> <span class="p">{</span>
			<span class="n">Title</span> <span class="p">=</span> <span class="p">(</span><span class="kt">string</span><span class="p">)</span> <span class="n">info</span><span class="p">[</span><span class="m">0</span><span class="p">],</span>
			<span class="n">Latitude</span> <span class="p">=</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span> <span class="n">info</span><span class="p">[</span><span class="m">1</span><span class="p">],</span>
			<span class="n">Longitude</span> <span class="p">=</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span> <span class="n">info</span><span class="p">[</span><span class="m">2</span><span class="p">]</span>
		<span class="p">});</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="n">infoList</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<h3 id="criao-dos-annotations">Criação dos annotations</h3>

<p>Por último, é necessário a criação dos annotations após a inicialização do mapa.</p>

<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">LoadView</span> <span class="p">()</span>
<span class="p">{</span>
	<span class="n">map</span> <span class="p">=</span> <span class="k">new</span> <span class="n">MKMapView</span> <span class="p">(</span><span class="n">UIScreen</span><span class="p">.</span><span class="n">MainScreen</span><span class="p">.</span><span class="n">Bounds</span><span class="p">);</span>
	<span class="n">View</span> <span class="p">=</span> <span class="n">map</span><span class="p">;</span>

	<span class="n">_infoList</span><span class="p">.</span><span class="n">ForEach</span> <span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">map</span><span class="p">.</span><span class="n">AddAnnotation</span> <span class="p">(</span><span class="k">new</span> <span class="n">MKPointAnnotation</span> <span class="p">()</span> <span class="p">{</span>
		<span class="n">Title</span> <span class="p">=</span> <span class="n">x</span><span class="p">.</span><span class="n">Title</span><span class="p">,</span>
		<span class="n">Coordinate</span> <span class="p">=</span> <span class="k">new</span> <span class="n">CLLocationCoordinate2D</span> <span class="p">()</span> <span class="p">{</span>
			<span class="n">Latitude</span> <span class="p">=</span> <span class="n">x</span><span class="p">.</span><span class="n">Latitude</span><span class="p">,</span>
			<span class="n">Longitude</span> <span class="p">=</span> <span class="n">x</span><span class="p">.</span><span class="n">Longitude</span>
		<span class="p">}</span>
	<span class="p">}));</span>
<span class="p">}</span></code></pre></div>

<h3 id="visualizando-o-resultado">Visualizando o resultado</h3>

<p>Se tudo ocorreu bem até aqui, ao rodar o aplicativo já teremos no nosso mapa a lista de todos os países e estádios da copa do mundo.</p>

<p><img src="/content/img/blog/posts/2014-07-05/mapa-pin.png" alt="Mapa com pins" /></p>

<h2 id="customizando-os-marcadores">Customizando os marcadores</h2>

<p>Para customizar os marcadores, primeiro, vamos precisar adicionar o nome da imagem à classe que estamos utilizando para representar os países e os estádios e depois criaremos o método que vai ser utilizado para obter as novas imagens ao invés dos pins vermelhos.</p>

<h3 id="adicionado-a-imagem-a-classe-worldcupinfo">Adicionado a imagem a classe WorldCupInfo</h3>

<p>Primeiro vamos adicionar a propriedade Image na classe WorldCupInfo.</p>

<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">class</span> <span class="nc">WorldCupInfo</span>
<span class="p">{</span>
	<span class="k">public</span> <span class="nf">WorldCupInfo</span> <span class="p">()</span>
	<span class="p">{</span>
	<span class="p">}</span>

	<span class="k">public</span> <span class="kt">string</span> <span class="n">Title</span> <span class="p">{</span>
		<span class="k">get</span><span class="p">;</span>
		<span class="k">set</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">public</span> <span class="kt">double</span> <span class="n">Latitude</span> <span class="p">{</span>
		<span class="k">get</span><span class="p">;</span>
		<span class="k">set</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">public</span> <span class="kt">double</span> <span class="n">Longitude</span> <span class="p">{</span>
		<span class="k">get</span><span class="p">;</span>
		<span class="k">set</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">public</span> <span class="kt">string</span> <span class="n">Image</span> <span class="p">{</span>
		<span class="k">get</span><span class="p">;</span>
		<span class="k">set</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>E precisamos adicionar o nova propriedade na inicialização da lista e na conversão para a classe WorldCupInfo.</p>

<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">WorldCupInfo</span><span class="p">&gt;</span> <span class="n">GetInfoList</span> <span class="p">()</span>
<span class="p">{</span>
	<span class="kt">var</span> <span class="n">infoMatrix</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">object</span><span class="p">[][]</span> <span class="p">{</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Algeria&quot;</span><span class="p">,</span> <span class="m">28.667122</span><span class="p">,</span><span class="m">2.677408</span><span class="p">,</span> <span class="s">&quot;algeria.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Argentina&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">35.003106</span><span class="p">,-</span><span class="m">64.741499</span><span class="p">,</span> <span class="s">&quot;argentina.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Australia&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">24.734834</span><span class="p">,</span><span class="m">134.248120</span><span class="p">,</span> <span class="s">&quot;australia.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Belgium&quot;</span><span class="p">,</span> <span class="m">50.503887</span><span class="p">,</span><span class="m">4.469936</span><span class="p">,</span> <span class="s">&quot;belgium.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Bosnia and Herzegovina&quot;</span><span class="p">,</span> <span class="m">42.5564516</span><span class="p">,</span><span class="m">15.7223665</span><span class="p">,</span> <span class="s">&quot;bosnia.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Brazil&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">14.235004</span><span class="p">,-</span><span class="m">51.92528</span><span class="p">,</span> <span class="s">&quot;brazil.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Cameroon&quot;</span><span class="p">,</span> <span class="m">7.369721999999999</span><span class="p">,</span><span class="m">12.354722</span><span class="p">,</span> <span class="s">&quot;cameroon.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Chile&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">35.675147</span><span class="p">,-</span><span class="m">71.542969</span><span class="p">,</span> <span class="s">&quot;chile.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Colombia&quot;</span><span class="p">,</span> <span class="m">4.570868</span><span class="p">,-</span><span class="m">74.29733299999999</span><span class="p">,</span> <span class="s">&quot;colombia.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Costa Rica&quot;</span><span class="p">,</span> <span class="m">9.748916999999999</span><span class="p">,-</span><span class="m">83.753428</span><span class="p">,</span> <span class="s">&quot;costa-rica.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Côte d&#39;Ivoire&quot;</span><span class="p">,</span> <span class="m">7.539988999999999</span><span class="p">,-</span><span class="m">5.547079999999999</span><span class="p">,</span> <span class="s">&quot;cote-ivoire.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Croatia&quot;</span><span class="p">,</span> <span class="m">45.1</span><span class="p">,</span><span class="m">15.2</span><span class="p">,</span> <span class="s">&quot;croatia.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Ecuador&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">1.831239</span><span class="p">,-</span><span class="m">78.18340599999999</span><span class="p">,</span> <span class="s">&quot;ecuador.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;England&quot;</span><span class="p">,</span> <span class="m">52.3555177</span><span class="p">,-</span><span class="m">1.1743197</span><span class="p">,</span> <span class="s">&quot;england.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;France&quot;</span><span class="p">,</span> <span class="m">46.227638</span><span class="p">,</span><span class="m">2.213749</span><span class="p">,</span> <span class="s">&quot;france.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Germany&quot;</span><span class="p">,</span> <span class="m">51.165691</span><span class="p">,</span><span class="m">10.451526</span><span class="p">,</span> <span class="s">&quot;germany.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Ghana&quot;</span><span class="p">,</span> <span class="m">7.946527</span><span class="p">,-</span><span class="m">1.023194</span><span class="p">,</span> <span class="s">&quot;ghana.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Greece&quot;</span><span class="p">,</span> <span class="m">39.074208</span><span class="p">,</span><span class="m">21.824312</span><span class="p">,</span> <span class="s">&quot;greece.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Honduras&quot;</span><span class="p">,</span> <span class="m">15.199999</span><span class="p">,-</span><span class="m">86.241905</span><span class="p">,</span> <span class="s">&quot;honduras.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Iran&quot;</span><span class="p">,</span> <span class="m">32.427908</span><span class="p">,</span><span class="m">53.688046</span><span class="p">,</span> <span class="s">&quot;iran.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Italy&quot;</span><span class="p">,</span> <span class="m">41.87194</span><span class="p">,</span><span class="m">12.56738</span><span class="p">,</span> <span class="s">&quot;italy.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Japan&quot;</span><span class="p">,</span> <span class="m">36.204824</span><span class="p">,</span><span class="m">138.252924</span><span class="p">,</span> <span class="s">&quot;japan.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Korea Republic&quot;</span><span class="p">,</span> <span class="m">35.907757</span><span class="p">,</span><span class="m">127.766922</span><span class="p">,</span> <span class="s">&quot;korea.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Mexico&quot;</span><span class="p">,</span> <span class="m">23.634501</span><span class="p">,-</span><span class="m">102.552784</span><span class="p">,</span> <span class="s">&quot;mexico.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Netherlands&quot;</span><span class="p">,</span> <span class="m">52.132633</span><span class="p">,</span><span class="m">5.291265999999999</span><span class="p">,</span> <span class="s">&quot;netherlands.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Nigeria&quot;</span><span class="p">,</span> <span class="m">9.081999</span><span class="p">,</span><span class="m">8.675276999999999</span><span class="p">,</span> <span class="s">&quot;nigeria.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Portugal&quot;</span><span class="p">,</span> <span class="m">39.39987199999999</span><span class="p">,-</span><span class="m">8.224454</span><span class="p">,</span> <span class="s">&quot;portugal.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Russia&quot;</span><span class="p">,</span> <span class="m">61.52401</span><span class="p">,</span><span class="m">105.318756</span><span class="p">,</span> <span class="s">&quot;russia.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Spain&quot;</span><span class="p">,</span> <span class="m">40.46366700000001</span><span class="p">,-</span><span class="m">3.74922</span><span class="p">,</span> <span class="s">&quot;spain.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Switzerland&quot;</span><span class="p">,</span> <span class="m">46.818188</span><span class="p">,</span><span class="m">8.227511999999999</span><span class="p">,</span> <span class="s">&quot;switzerland.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Uruguay&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">32.522779</span><span class="p">,-</span><span class="m">55.765835</span><span class="p">,</span> <span class="s">&quot;uruguay.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;USA&quot;</span><span class="p">,</span> <span class="m">37.09024</span><span class="p">,-</span><span class="m">95.712891</span><span class="p">,</span> <span class="s">&quot;usa.png&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Arena Fonte Nova&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">12.97883</span><span class="p">,-</span><span class="m">38.5043711</span><span class="p">,</span> <span class="s">&quot;fonte-nova.jpeg&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Estádio das Dunas&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">5.8268266</span><span class="p">,-</span><span class="m">35.2124299</span><span class="p">,</span> <span class="s">&quot;arena-dunas.jpg&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Estádio Castelão&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">3.8072311</span><span class="p">,-</span><span class="m">38.5224338</span><span class="p">,</span> <span class="s">&quot;estadio-castelao.jpg&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Arena Pernambuco&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">8.0406496</span><span class="p">,-</span><span class="m">35.0082049</span><span class="p">,</span> <span class="s">&quot;arena-pernambuco.jpg&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Arena Amazônia&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">3.083142</span><span class="p">,-</span><span class="m">60.02810849999999</span><span class="p">,</span> <span class="s">&quot;arena-amazonia.jpg&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Estádio Nacional (Mané Garrincha)&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">15.7835191</span><span class="p">,-</span><span class="m">47.899211</span><span class="p">,</span> <span class="s">&quot;estadio-nacional.jpg&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Arena Pantanal&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">15.604017</span><span class="p">,-</span><span class="m">56.1216325</span><span class="p">,</span> <span class="s">&quot;arena-pantanal.jpg&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Arena Corinthians&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">23.5453331</span><span class="p">,-</span><span class="m">46.4737017</span><span class="p">,</span> <span class="s">&quot;arena-corinthians.jpg&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Estádio do Maracanã&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">22.9121089</span><span class="p">,-</span><span class="m">43.2301558</span><span class="p">,</span> <span class="s">&quot;estadio-maracana.jpg&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Estádio Mineirão&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">19.865867</span><span class="p">,-</span><span class="m">43.97113150000001</span><span class="p">,</span> <span class="s">&quot;estadio-mineirao.jpg&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Arena da Baixada&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">25.4482116</span><span class="p">,-</span><span class="m">49.2769866</span><span class="p">,</span> <span class="s">&quot;arena-baixada.jpg&quot;</span> <span class="p">},</span>
		<span class="k">new</span> <span class="kt">object</span><span class="p">[]</span> <span class="p">{</span><span class="s">&quot;Estádio Beira-Rio&quot;</span><span class="p">,</span> <span class="p">-</span><span class="m">30.065066</span><span class="p">,-</span><span class="m">51.2365144</span><span class="p">,</span> <span class="s">&quot;arena-beira-rio.jpg&quot;</span> <span class="p">}</span>
	<span class="p">};</span>

	<span class="kt">var</span> <span class="n">infoList</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">WorldCupInfo</span><span class="p">&gt;</span> <span class="p">();</span>
	<span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">info</span> <span class="k">in</span> <span class="n">infoMatrix</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">infoList</span><span class="p">.</span><span class="n">Add</span> <span class="p">(</span><span class="k">new</span> <span class="n">WorldCupInfo</span> <span class="p">()</span> <span class="p">{</span>
			<span class="n">Title</span> <span class="p">=</span> <span class="p">(</span><span class="kt">string</span><span class="p">)</span> <span class="n">info</span><span class="p">[</span><span class="m">0</span><span class="p">],</span>
			<span class="n">Latitude</span> <span class="p">=</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span> <span class="n">info</span><span class="p">[</span><span class="m">1</span><span class="p">],</span>
			<span class="n">Longitude</span> <span class="p">=</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span> <span class="n">info</span><span class="p">[</span><span class="m">2</span><span class="p">],</span>
			<span class="n">Image</span> <span class="p">=</span> <span class="p">(</span><span class="kt">string</span><span class="p">)</span> <span class="n">info</span><span class="p">[</span><span class="m">3</span><span class="p">]</span>
		<span class="p">});</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="n">infoList</span><span class="p">;</span>																																																
<span class="p">}</span></code></pre></div>

<h3 id="customizando-as-imagens">Customizando as imagens</h3>

<p>Os mapas no Xamarin.iOS lidam com os annotations através do padrão delegate. Ao setarmos uma instância da classe MKMapViewDelegate na propriedade Delegate do nosso mapa estamos transferindo a responsabilidade de interagir com as annotations para a nova classe. Exemplos de propriedades que podem ser customizadas através do delegate é a exibição das imagens e os eventos de clicks. Para customizar as imagens no mapa, vamos criar uma nova classe que herda de MKMapViewDelegate e sobreescreve a exibição da annotation. O delegate também irá guardar uma referência para a lista de informações para que seja possível identificar qual a imagem que irá ser exibida.</p>

<p>Segue o código abaixo.</p>

<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">class</span> <span class="nc">MyMapDelegate</span> <span class="p">:</span> <span class="n">MKMapViewDelegate</span>
<span class="p">{</span>
	<span class="k">private</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">WorldCupInfo</span><span class="p">&gt;</span> <span class="n">_infoList</span><span class="p">;</span>

	<span class="k">public</span> <span class="nf">MyMapDelegate</span><span class="p">(</span><span class="n">List</span><span class="p">&lt;</span><span class="n">WorldCupInfo</span><span class="p">&gt;</span> <span class="n">infoList</span><span class="p">)</span> 
	<span class="p">{</span>
		<span class="n">_infoList</span> <span class="p">=</span> <span class="n">infoList</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="kt">string</span> <span class="n">pId</span> <span class="p">=</span> <span class="s">&quot;PinAnnotation&quot;</span><span class="p">;</span>

	<span class="k">public</span> <span class="k">override</span> <span class="n">MKAnnotationView</span> <span class="nf">GetViewForAnnotation</span> <span class="p">(</span><span class="n">MKMapView</span> <span class="n">mapView</span><span class="p">,</span> <span class="n">NSObject</span> <span class="n">annotation</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">MKAnnotationView</span> <span class="n">anView</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">annotation</span> <span class="k">is</span> <span class="n">MKUserLocation</span><span class="p">)</span>
			<span class="k">return</span> <span class="k">null</span><span class="p">;</span> 

		<span class="c1">// create pin annotation view</span>
		<span class="n">anView</span> <span class="p">=</span> <span class="p">(</span><span class="n">MKPinAnnotationView</span><span class="p">)</span><span class="n">mapView</span><span class="p">.</span><span class="n">DequeueReusableAnnotation</span> <span class="p">(</span><span class="n">pId</span><span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">anView</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
			<span class="n">anView</span> <span class="p">=</span> <span class="k">new</span> <span class="n">MKPinAnnotationView</span> <span class="p">(</span><span class="n">annotation</span><span class="p">,</span> <span class="n">pId</span><span class="p">);</span>

		<span class="kt">var</span> <span class="n">pointAnnotation</span> <span class="p">=</span> <span class="p">(</span><span class="n">MKPointAnnotation</span><span class="p">)</span> <span class="n">annotation</span><span class="p">;</span>
		<span class="kt">var</span> <span class="n">info</span> <span class="p">=</span> <span class="n">_infoList</span><span class="p">.</span><span class="n">Find</span> <span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">Title</span> <span class="p">==</span> <span class="n">pointAnnotation</span><span class="p">.</span><span class="n">Title</span><span class="p">);</span>					

		<span class="n">anView</span><span class="p">.</span><span class="n">Image</span> <span class="p">=</span> <span class="n">GetImage</span> <span class="p">(</span><span class="n">info</span><span class="p">.</span><span class="n">Image</span><span class="p">);</span>
		<span class="n">anView</span><span class="p">.</span><span class="n">CanShowCallout</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>

		<span class="k">return</span> <span class="n">anView</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">public</span> <span class="n">UIImage</span> <span class="nf">GetImage</span><span class="p">(</span><span class="kt">string</span> <span class="n">imageName</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="kt">var</span> <span class="n">documents</span> <span class="p">=</span>
			<span class="n">Environment</span><span class="p">.</span><span class="n">GetFolderPath</span> <span class="p">(</span><span class="n">Environment</span><span class="p">.</span><span class="n">SpecialFolder</span><span class="p">.</span><span class="n">Resources</span><span class="p">);</span>

		<span class="kt">var</span> <span class="n">filename</span> <span class="p">=</span> <span class="n">Path</span><span class="p">.</span><span class="n">Combine</span> <span class="p">(</span><span class="n">documents</span><span class="p">,</span> <span class="n">imageName</span><span class="p">);</span>

		<span class="kt">var</span> <span class="n">image</span> <span class="p">=</span> <span class="n">UIImage</span><span class="p">.</span><span class="n">FromFile</span> <span class="p">(</span><span class="n">filename</span><span class="p">).</span><span class="n">Scale</span><span class="p">(</span><span class="k">new</span> <span class="n">SizeF</span><span class="p">()</span> <span class="p">{</span><span class="n">Height</span><span class="p">=</span><span class="m">20</span><span class="p">,</span> <span class="n">Width</span><span class="p">=</span><span class="m">30</span><span class="p">});</span>

		<span class="k">return</span> <span class="n">image</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></div>

<p>Por último, é necessário associar o delegate ao mapa, para isso vamos fazer a seguinte alteração no código de criação do mapa.</p>

<div class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">LoadView</span> <span class="p">()</span>
<span class="p">{</span>
	<span class="n">map</span> <span class="p">=</span> <span class="k">new</span> <span class="n">MKMapView</span> <span class="p">(</span><span class="n">UIScreen</span><span class="p">.</span><span class="n">MainScreen</span><span class="p">.</span><span class="n">Bounds</span><span class="p">);</span>
	<span class="n">map</span><span class="p">.</span><span class="n">Delegate</span> <span class="p">=</span> <span class="k">new</span> <span class="n">MyMapDelegate</span> <span class="p">(</span><span class="n">_infoList</span><span class="p">);</span>
	<span class="n">View</span> <span class="p">=</span> <span class="n">map</span><span class="p">;</span>

	<span class="n">_infoList</span><span class="p">.</span><span class="n">ForEach</span> <span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">map</span><span class="p">.</span><span class="n">AddAnnotation</span> <span class="p">(</span><span class="k">new</span> <span class="n">MKPointAnnotation</span> <span class="p">()</span> <span class="p">{</span>
		<span class="n">Title</span> <span class="p">=</span> <span class="n">x</span><span class="p">.</span><span class="n">Title</span><span class="p">,</span>
		<span class="n">Coordinate</span> <span class="p">=</span> <span class="k">new</span> <span class="n">CLLocationCoordinate2D</span><span class="p">()</span> <span class="p">{</span>
			<span class="n">Latitude</span> <span class="p">=</span> <span class="n">x</span><span class="p">.</span><span class="n">Latitude</span><span class="p">,</span>
			<span class="n">Longitude</span> <span class="p">=</span> <span class="n">x</span><span class="p">.</span><span class="n">Longitude</span>
		<span class="p">}</span>
	<span class="p">}));</span>
<span class="p">}</span></code></pre></div>

<h3 id="visualizando-o-resultado-final">Visualizando o resultado final</h3>

<p>Ao final desse artigo, poderemos visualizar um mapa com todos os países e estádios da copa do mundo com suas respectivas imagens. Para aqueles que quiserem acesso ao código, o mesmo se encontra <a href="https://github.com/Oncedev/WorldCupMap">disponível no github da OnceDev</a>.</p>

<p><img src="/content/img/blog/posts/2014-07-05/mapa-image.png" alt="Mapa com imagens" /></p>


        </div>
    </article>
    <div class="blog-divider"></div>     
    




<div class="about-author">
    <h3 class="title">Sobre o Autor</h3>
    <div class="author-content">
        <div class="avatar"><img alt="" src="/content/img/team/paulo.jpeg"></div>
        <div class="data">
                <h4><a href="mailto:pauloortins@oncedev.com">Paulo Ortins</a></h4>
                <p>
                    Completamente apaixonado por programação, sócio e desenvolvedor na OnceDev, estudante de mestrado na UFBA e também escreve em inglês em www.pauloortins.com.
                </p>
        </div>
        <!-- End data -->
    </div>
</div>
    <div class="divider"></div>
    <!-- Comments Section Start -->
    <div class="comment-wrapper">
        <h3 class="title">Comentários</h3>
        <div class="clearfix"></div>
            
                        <div id="disqus_thread"></div>
                    <script type="text/javascript">
                            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                            var disqus_shortname = 'oncedev'; // required: replace example with your forum shortname

                            /* * * DON'T EDIT BELOW THIS LINE * * */
                            (function() {
                                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                            })();
                    </script>
                    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            
        <div class="clearfix">
        </div>
    </div>
    <!-- Comments Section End -->
    <div class="divider"></div>

</div>

                        <div class="sidebar col-lg-3 col-md-3 col-sm-4 col-xs-12">
    <!-- Tab Start -->
    <div class="widget tabs">
        <h3 class="title">Recentes</h3>
        <div id="horizontal-tabs">
            <div class="contents">
                <div class="tabscontent" id="content1" style="display: block;">
                    <ul class="posts">
                    
                    <li>
                        <p><a href="/mobile/2015/07/19/xamarin-forms-grid/">Xamarin Forms: Grid</a></p>
                        <span class="color">19/07/2015</span>
                    </li>
                    
                    <li>
                        <p><a href="/mobile/2015/06/14/xamarin-forms-stacklayout/">Xamarin Forms: StackLayout</a></p>
                        <span class="color">14/06/2015</span>
                    </li>
                    
                    <li>
                        <p><a href="/eventos/2015/05/21/tdc-2015-florianopolis/">TDC Florianópolis 2015</a></p>
                        <span class="color">21/05/2015</span>
                    </li>
                    
                    <li>
                        <p><a href="/mobile/2015/05/08/xamarin-forms-usando-pages-parte-3/">Xamarin Forms: Usando Pages - Parte 3</a></p>
                        <span class="color">08/05/2015</span>
                    </li>
                    
                    <li>
                        <p><a href="/mobile/2015/05/03/xamarin-forms-usando-listview/">Xamarin Forms: Usando a ListView</a></p>
                        <span class="color">03/05/2015</span>
                    </li>
                    
                    <li>
                        <p><a href="/mobile/2015/04/25/xamarin-vs-outras-plataformas/">Como o Xamarin se compara com outras plataformas?</a></p>
                        <span class="color">25/04/2015</span>
                    </li>
                    
                    <li>
                        <p><a href="/agilidade/2015/04/15/quer-ser-um-cliente-feliz-pergunte-me-como/">Quer ser um cliente feliz? Pergunte-me como!</a></p>
                        <span class="color">15/04/2015</span>
                    </li>
                    
                    <li>
                        <p><a href="/mobile/2015/04/10/xamarin-forms-usando-pages-parte-2/">Xamarin Forms: Usando Pages - Parte 2</a></p>
                        <span class="color">10/04/2015</span>
                    </li>
                    
                    <li>
                        <p><a href="/mobile/2015/04/08/xamarin-forms-usando-pages-parte-1/">Xamarin Forms: Usando Pages - Parte 1</a></p>
                        <span class="color">08/04/2015</span>
                    </li>
                    
                    <li>
                        <p><a href="/mobile/2015/03/18/anatomia-de-um-aplicativo-xamarins-forms/">Anatomia de um aplicativo Xamarin.Forms</a></p>
                        <span class="color">18/03/2015</span>
                    </li>
                    
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- Tab End -->
    <!-- Category Widget Start -->
    <div class="widget category">
        <h3 class="title">Categorias</h3>
        <ul class="category-list slide">
            
            <li><a href="/eventos">eventos</a></li>
            
            <li><a href="/lideranca">lideranca</a></li>
            
            <li><a href="/testes">testes</a></li>
            
            <li><a href="/jekyll">jekyll</a></li>
            
            <li><a href="/mobile">mobile</a></li>
            
            <li><a href="/carreira">carreira</a></li>
            
            <li><a href="/aspnet">aspnet</a></li>
            
            <li><a href="/agilidade">agilidade</a></li>
            
            <li><a href="/mercado">mercado</a></li>
            
        </ul>
    </div>
    <!-- Category Widget End -->                                
</div>
<!-- Sidebar End --> 
    
                        </div>
                </div>
                </div>
                <!-- Main Content end-->
                </div>
		 <!-- Content End -->		
		 
         <!-- Footer Start -->
         <footer id="footer">
            <!-- Footer Top Start -->
            <div class="footer-top">
               <div class="container">
                  <div class="row">
				  <section class="col-lg-3 col-md-3 col-xs-12 col-sm-3 footer-three">
                       <div class="fb-like-box" data-href="https://www.facebook.com/oncedevsolucoes" data-colorscheme="light" data-show-faces="true" data-header="true" data-stream="false" data-show-border="false"></div>
					 </section>
                     <section class="col-lg-3 col-md-3 col-xs-12 col-sm-3 footer-one">
                        <h3>Sobre</h3>
                        <p> 
                           A OnceDev foi fundada por profissionais que acreditam que é possível produzir software de maneira profissional, com alta produtividade sem abrir mão de qualidade e do respeito ao cliente. 
                        </p>
                     </section>
					
                     <section class="col-lg-3 col-md-3 col-xs-12 col-sm-3 footer-three">
                        <h3>Contatos</h3>
                        <ul class="contact-us">
                           <li>
                              <i class="icon-map-marker"></i>
                              <p> 
                                 <strong>Endereço:</strong> Av. Otavio Mangabeira, nº 929 - Pituba, <br>
                                 Salvador, Bahia 
                              </p>
                           </li>
                           <li>
                              <i class="icon-phone"></i>
                              <p><strong>Telefone:</strong> +55 71 9993 1356</p>
                           </li>
                           <li>
                              <i class="icon-envelope"></i>
                              <p><strong>Email:</strong><a href="mailto:oncedev@oncedev.com">oncedev@oncedev.com</a></p>
                           </li>
                        </ul>
                     </section>
					 
					  </div>
               </div>
            </div>
            <!-- Footer Top End --> 
            <!-- Footer Bottom Start -->
            <div class="footer-bottom">
               <div class="container">
                  <div class="row">
                     <div class="col-lg-6 col-md-6 col-xs-12 col-sm-6 "> &copy; Copyright 2013 by <a href="#">OnceDev</a>. All Rights Reserved. </div>					 
                     <div class="col-lg-6 col-md-6 col-xs-12 col-sm-6 ">
                        <ul class="social social-icons-footer-bottom">
                           <a href="https://www.facebook.com/oncedevsolucoes" target="_blankk" data-toggle="tooltip" title="Facebook"><li class="facebook" style="margin-right: 5px !important;"><i class="icon-facebook"></i></li></a>
                           <a href="https://twitter.com/OnceDev" target="_blankk" data-toggle="tooltip" title="Twitter"><li class="twitter"><i class="icon-twitter"></i></li></a>
                           <!-- <li class="dribbble"><a href="#" data-toggle="tooltip" title="Dribble"><i class="icon-dribbble"></i></a></li>
                           <li class="linkedin"><a href="#" data-toggle="tooltip" title="LinkedIn"><i class="icon-linkedin"></i></a></li>
                           <li class="rss"><a href="#" data-toggle="tooltip" title="Rss"><i class="icon-rss"></i></a></li> -->
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
            <!-- Footer Bottom End --> 
         </footer>
         <!-- Scroll To Top --> 
         <a href="#" class="scrollup"><i class="icon-angle-up"></i></a>
		</div>
		<!-- Wrap End -->
		<!-- The Scripts -->
		<script src="/content/js/jquery.min.js"></script>
		<script src="/content/js/bootstrap.js"></script>
		<script src="/content/js/jquery.parallax.js"></script> 
		<script src="/content/js/modernizr-2.6.2.min.js"></script> 
		<script src="/content/js/revolution-slider/js/jquery.themepunch.revolution.min.js"></script>
		<script src="/content/js/jquery.nivo.slider.pack.js"></script>
		<script src="/content/js/jquery.prettyPhoto.js"></script>
		<script src="/content/js/superfish.js"></script>
		<script src="/content/js/tweetMachine.js"></script>
		<script src="/content/js/tytabs.js"></script>
		<script src="/content/js/jquery.gmap.min.js"></script>
		<script src="/content/js/circularnav.js"></script>
		<script src="/content/js/jquery.sticky.js"></script>
		<script src="/content/js/jflickrfeed.js"></script>
		<script src="/content/js/imagesloaded.pkgd.min.js"></script>
		<script src="/content/js/waypoints.min.js"></script>
		<script src=" /content/js/custom.js "></script>
		<div id="fb-root"></div>
		<script>(function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return;
		  js = d.createElement(s); js.id = id;
		  js.src = "//connect.facebook.net/pt_BR/all.js#xfbml=1";
		  fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));</script>
			  
		<script type="text/javascript">
			var disqus_shortname = 'oncedev'; // required: replace example with your forum shortname
			(function () {
			var s = document.createElement('script'); s.async = true;
			s.type = 'text/javascript';
			s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
			(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
			}());
		</script>
		
	  </body>
	  
</html>
